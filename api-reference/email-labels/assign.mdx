---
title: "Assign Labels"
api: "POST /api/v1/emails/{id}/labels"
description: "Assign one or more labels to an email"
---

## Request

<ParamField path="id" type="string" required>
  Email UID (numeric) or message_id (string)
</ParamField>

<ParamField query="account" type="string" required>
  Email account
</ParamField>

<ParamField query="folder" type="string" default="INBOX">
  Mailbox folder where the email is located
</ParamField>

### Body

<ParamField body="label_ids" type="array">
  Array of existing label IDs to assign
</ParamField>

<ParamField body="labels" type="array">
  Array of label names (creates if not exists)
</ParamField>

<ParamField body="agent_name" type="string">
  Name of the agent applying the labels (for tracking)
</ParamField>

<ParamField body="metadata" type="object">
  Additional context about the categorization
</ParamField>

<Note>
  At least one of `label_ids` or `labels` is required.
</Note>

## Response

<ResponseField name="success" type="boolean">
  Indicates if labels were assigned successfully
</ResponseField>

<ResponseField name="data" type="object">
  <Expandable title="properties">
    <ResponseField name="labels" type="array">
      All labels now assigned to the email
    </ResponseField>
    <ResponseField name="created_labels" type="array">
      Labels that were created (if using names)
    </ResponseField>
    <ResponseField name="message_id" type="string">
      The message ID of the email
    </ResponseField>
    <ResponseField name="account" type="string">
      The email account
    </ResponseField>
  </Expandable>
</ResponseField>

<RequestExample>
```bash cURL - By ID
curl -X POST "https://api.jasni.ai/api/v1/emails/12345/labels?account=you@domain.com" \
  -H "Authorization: Bearer jsk_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "label_ids": ["550e8400-e29b-41d4-a716-446655440000"],
    "agent_name": "classification-agent"
  }'
```

```bash cURL - By name (auto-create)
curl -X POST "https://api.jasni.ai/api/v1/emails/12345/labels?account=you@domain.com" \
  -H "Authorization: Bearer jsk_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "labels": ["Support Request", "High Priority"],
    "agent_name": "triage-agent",
    "metadata": {
      "confidence": 0.95,
      "model": "gpt-4"
    }
  }'
```

```javascript JavaScript
const response = await fetch(
  'https://api.jasni.ai/api/v1/emails/12345/labels?account=you@domain.com',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer jsk_your_api_key',
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      labels: ['Support Request', 'High Priority'],
      agent_name: 'triage-agent',
      metadata: {
        confidence: 0.95,
        model: 'gpt-4',
      },
    }),
  }
);

const data = await response.json();
console.log('Assigned labels:', data.data.labels);
console.log('Created labels:', data.data.created_labels);
```

```python Python
import requests

response = requests.post(
    'https://api.jasni.ai/api/v1/emails/12345/labels',
    headers={
        'Authorization': 'Bearer jsk_your_api_key',
        'Content-Type': 'application/json',
    },
    params={'account': 'you@domain.com'},
    json={
        'labels': ['Support Request', 'High Priority'],
        'agent_name': 'triage-agent',
        'metadata': {
            'confidence': 0.95,
            'model': 'gpt-4',
        },
    }
)

result = response.json()
print(f"Assigned: {len(result['data']['labels'])} labels")
print(f"Created: {len(result['data']['created_labels'])} new labels")
```
</RequestExample>

<ResponseExample>
```json Success
{
  "success": true,
  "data": {
    "labels": [
      {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "name": "Support Request",
        "color": "#3b82f6",
        "applied_by": "agent",
        "applied_at": "2024-01-15T10:30:00Z"
      },
      {
        "id": "550e8400-e29b-41d4-a716-446655440001",
        "name": "High Priority",
        "color": "#ef4444",
        "applied_by": "agent",
        "applied_at": "2024-01-15T10:30:00Z"
      }
    ],
    "created_labels": [
      {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "name": "Support Request",
        "color": "#3b82f6"
      },
      {
        "id": "550e8400-e29b-41d4-a716-446655440001",
        "name": "High Priority",
        "color": "#ef4444"
      }
    ],
    "message_id": "<abc123@example.com>",
    "account": "you@domain.com"
  },
  "message": "Labels assigned successfully"
}
```

```json Error - No labels
{
  "success": false,
  "error": "Either label_ids or labels array is required"
}
```
</ResponseExample>

## Use Cases

### AI Email Classification

```javascript
// Classify incoming emails with an AI agent
async function classifyEmail(email) {
  const classification = await aiAgent.classify(email.text);
  
  await fetch(
    `https://api.jasni.ai/api/v1/emails/${email.uid}/labels?account=${email.account}`,
    {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer jsk_your_api_key',
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        labels: classification.categories,
        agent_name: 'email-classifier',
        metadata: {
          confidence: classification.confidence,
          reasoning: classification.reasoning,
        },
      }),
    }
  );
}
```

## Notes

- Labels are created automatically if they don't exist when using `labels` (names)
- Created labels get a random color from a default palette
- The `agent_name` and `metadata` are stored for auditing purposes
- Re-assigning the same label updates its metadata
