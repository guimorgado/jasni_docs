---
title: "Events"
description: "Detailed reference for all webhook event types and their payloads"
icon: "/icons-svg/bolt.svg"
---

## Event Structure

All webhook events follow the same structure:

```json
{
  "event": "event.type",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    // Event-specific data
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| `event` | string | Event type identifier |
| `timestamp` | string | ISO 8601 timestamp when event occurred |
| `data` | object | Event-specific payload |

---

## email.received

Triggered when a new email is received in any monitored mailbox.

### Payload

```json
{
  "event": "email.received",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "id": "12345",
    "messageId": "<abc123@example.com>",
    "from": "sender@example.com",
    "to": ["you@domain.com"],
    "cc": ["colleague@domain.com"],
    "subject": "Project Update",
    "account": "you@domain.com",
    "folder": "INBOX",
    "text": "Hi,\n\nHere's the latest update...",
    "html": "<p>Hi,</p><p>Here's the latest update...</p>",
    "attachments": [
      {
        "filename": "report.pdf",
        "contentType": "application/pdf",
        "size": 102400
      }
    ]
  }
}
```

### Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Email UID |
| `messageId` | string | RFC 2822 Message-ID |
| `from` | string | Sender email address |
| `to` | string[] | Recipients |
| `cc` | string[] | CC recipients (optional) |
| `subject` | string | Email subject |
| `account` | string | Your email account |
| `folder` | string | Mailbox folder |
| `text` | string | Plain text body |
| `html` | string | HTML body |
| `attachments` | object[] | Attachment metadata |

### Use Cases

- AI agents processing incoming emails
- Auto-reply systems
- Email classification and routing
- CRM integrations

---

## email.sent

Triggered when an email is successfully sent via the API.

### Payload

```json
{
  "event": "email.sent",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "id": "<1705312200@domain.com>",
    "messageId": "<1705312200@domain.com>",
    "from": "you@domain.com",
    "to": ["recipient@example.com"],
    "cc": ["copy@example.com"],
    "subject": "Hello from Jasni!",
    "account": "you@domain.com",
    "text": "Message content...",
    "html": "<p>Message content...</p>"
  }
}
```

### Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Email Message-ID |
| `messageId` | string | RFC 2822 Message-ID |
| `from` | string | Sender address |
| `to` | string[] | Recipients |
| `cc` | string[] | CC recipients (optional) |
| `subject` | string | Email subject |
| `account` | string | Sending account |
| `text` | string | Plain text body |
| `html` | string | HTML body |

### Use Cases

- Tracking sent emails
- Analytics and reporting
- Confirmation workflows

---

## email.delivered

Triggered when an email is successfully delivered to the recipient's mail server.

### Payload

```json
{
  "event": "email.delivered",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "id": "<delivered123@domain.com>",
    "messageId": "<delivered123@domain.com>",
    "from": "you@domain.com",
    "to": ["recipient@example.com"],
    "subject": "Hello from Jasni!",
    "account": "you@domain.com",
    "deliveredAt": "2024-01-15T10:30:05.000Z",
    "smtpResponse": "250 2.0.0 OK"
  }
}
```

### Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Email Message-ID |
| `messageId` | string | RFC 2822 Message-ID |
| `from` | string | Sender address |
| `to` | string[] | Recipients |
| `subject` | string | Email subject |
| `account` | string | Sending account |
| `deliveredAt` | string | Delivery timestamp |
| `smtpResponse` | string | SMTP server response |

### Use Cases

- Delivery confirmation tracking
- SLA monitoring
- Analytics and reporting
- Delivery rate optimization

---

## email.bounced

Triggered when an email fails to deliver (bounce).

### Payload

```json
{
  "event": "email.bounced",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "id": "<bounced123@domain.com>",
    "messageId": "<bounced123@domain.com>",
    "from": "you@domain.com",
    "to": ["invalid@example.com"],
    "subject": "Original subject",
    "account": "you@domain.com",
    "bounceType": "hard",
    "bounceReason": "550 5.1.1 User unknown"
  }
}
```

### Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Original message ID |
| `messageId` | string | Original Message-ID |
| `from` | string | Original sender |
| `to` | string[] | Failed recipients |
| `subject` | string | Original subject |
| `account` | string | Sending account |
| `bounceType` | string | Type: "hard" or "soft" |
| `bounceReason` | string | Bounce error message |

### Use Cases

- Clean invalid addresses from lists
- Notify users of delivery failures
- Monitor email deliverability

---

## email.spam

Triggered when a recipient marks your email as spam (complaint).

### Payload

```json
{
  "event": "email.spam",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "id": "<complained123@domain.com>",
    "messageId": "<complained123@domain.com>",
    "from": "you@domain.com",
    "to": ["recipient@example.com"],
    "subject": "Your Newsletter",
    "account": "you@domain.com",
    "complainedAt": "2024-01-15T10:30:00.000Z",
    "feedbackType": "abuse"
  }
}
```

### Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Email Message-ID |
| `messageId` | string | Message-ID |
| `from` | string | Sender address |
| `to` | string[] | Recipients who complained |
| `subject` | string | Email subject |
| `account` | string | Sending account |
| `complainedAt` | string | Complaint timestamp |
| `feedbackType` | string | Feedback type (abuse, fraud, etc.) |

### Use Cases

- Unsubscribe complainers automatically
- Monitor sender reputation
- Compliance tracking
- Improve email content

---

## email.rejected

Triggered when an email is rejected before delivery (e.g., policy violation, spam filter).

### Payload

```json
{
  "event": "email.rejected",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "id": "<rejected123@domain.com>",
    "messageId": "<rejected123@domain.com>",
    "from": "you@domain.com",
    "to": ["recipient@example.com"],
    "subject": "Rejected Email",
    "account": "you@domain.com",
    "rejectionReason": "Policy violation: suspected spam content",
    "rejectionCode": "550"
  }
}
```

### Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Email Message-ID |
| `messageId` | string | RFC 2822 Message-ID |
| `from` | string | Sender address |
| `to` | string[] | Intended recipients |
| `subject` | string | Email subject |
| `account` | string | Sending account |
| `rejectionReason` | string | Reason for rejection |
| `rejectionCode` | string | SMTP rejection code |

### Use Cases

- Monitor policy violations
- Debug delivery issues
- Improve email content
- Alert on suspicious activity

---

## email.deleted

Triggered when an email is deleted via the API.

### Payload

```json
{
  "event": "email.deleted",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "id": "12345",
    "account": "you@domain.com"
  }
}
```

### Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Deleted email UID |
| `account` | string | Email account |

### Use Cases

- Audit logging
- Sync with external systems
- Compliance tracking

---

## domain.verified

Triggered when a custom domain is successfully verified.

### Payload

```json
{
  "event": "domain.verified",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "domain": "example.com",
    "verifiedAt": "2024-01-15T10:30:00.000Z",
    "dnsRecords": {
      "mx": true,
      "spf": true,
      "dkim": true,
      "dmarc": true
    }
  }
}
```

### Fields

| Field | Type | Description |
|-------|------|-------------|
| `domain` | string | Verified domain name |
| `verifiedAt` | string | Verification timestamp |
| `dnsRecords` | object | DNS verification status |
| `dnsRecords.mx` | boolean | MX record verified |
| `dnsRecords.spf` | boolean | SPF record verified |
| `dnsRecords.dkim` | boolean | DKIM record verified |
| `dnsRecords.dmarc` | boolean | DMARC record verified |

### Use Cases

- Notify users when domain setup is complete
- Trigger onboarding workflows
- Enable domain-specific features
- Analytics tracking

---

## Example Handler

Handle all events in one endpoint:

<Tabs>
  <Tab title="TypeScript">
```typescript
import { verifySignature } from 'jasni-sdk'
import express from 'express'

const app = express()

app.post('/webhooks/jasni', express.raw({ type: 'application/json' }), async (req, res) => {
  const signature = req.headers['x-jasni-signature'] as string
  const payload = req.body.toString()
  
  if (!verifySignature(payload, signature, process.env.WEBHOOK_SECRET!)) {
    return res.status(401).send('Invalid signature')
  }
  
  res.status(200).send('OK')
  
  const { event, timestamp, data } = JSON.parse(payload)
  console.log(`[${timestamp}] ${event}`)
  
  switch (event) {
    case 'email.received':
      await processIncomingEmail(data)
      break
    case 'email.sent':
      await logSentEmail(data)
      break
    case 'email.delivered':
      await confirmDelivery(data)
      break
    case 'email.bounced':
      await handleBounce(data)
      break
    case 'email.spam':
      await handleComplaint(data)
      break
    case 'email.rejected':
      await handleRejection(data)
      break
    case 'email.deleted':
      await syncDeletion(data)
      break
    case 'domain.verified':
      await notifyDomainVerified(data)
      break
  }
})
```
  </Tab>
  <Tab title="Python">
```python
from fastapi import FastAPI, Request, HTTPException
from jasni.webhooks import verify_signature
import os

app = FastAPI()

@app.post("/webhooks/jasni")
async def handle_webhook(request: Request):
    signature = request.headers.get("X-Jasni-Signature")
    payload = await request.body()
    
    if not verify_signature(payload, signature, os.environ.get("WEBHOOK_SECRET")):
        raise HTTPException(status_code=401, detail="Invalid signature")
    
    event = await request.json()
    print(f"[{event['timestamp']}] {event['event']}")
    
    match event["event"]:
        case "email.received":
            await process_incoming_email(event["data"])
        case "email.sent":
            await log_sent_email(event["data"])
        case "email.delivered":
            await confirm_delivery(event["data"])
        case "email.bounced":
            await handle_bounce(event["data"])
        case "email.spam":
            await handle_complaint(event["data"])
        case "email.rejected":
            await handle_rejection(event["data"])
        case "email.deleted":
            await sync_deletion(event["data"])
        case "domain.verified":
            await notify_domain_verified(event["data"])
    
    return {"status": "ok"}
```
  </Tab>
</Tabs>
