---
title: "Overview"
description: "Enable your AI agents to react instantly to incoming emails"
icon: "eye"
---

## What are Webhooks?

Webhooks are the trigger mechanism that awakens your AI agent. Instead of your agent constantly checking for new emails, webhooks notify it instantly when something happens—a new email arrives, a message bounces, or a delivery fails.

<CardGroup cols={2}>
  <Card title="Instant Awareness" icon="/icons-svg/refresh.svg">
    Your agent knows the moment an email arrives
  </Card>
  <Card title="Resource Efficient" icon="/icons-svg/check.svg">
    No wasted cycles polling—agents only wake when needed
  </Card>
  <Card title="Secure" icon="/icons-svg/keys.svg">
    Signed payloads ensure events are authentic
  </Card>
  <Card title="Reliable" icon="/icons-svg/webhook.svg">
    Automatic retries guarantee delivery
  </Card>
</CardGroup>

## Quick Start

### 1. Create a Webhook Endpoint

Create an HTTP endpoint that will wake your agent when events occur:

```javascript
// Express.js example
app.post('/webhooks/jasni', express.json(), async (req, res) => {
  const { event, data } = req.body;
  
  console.log(`Agent notified of ${event}`);
  
  // Trigger your AI agent
  switch (event) {
    case 'email.received':
      await agent.processIncomingEmail(data);
      break;
    case 'email.sent':
      await agent.confirmDelivery(data);
      break;
  }
  
  // Always respond with 200
  res.status(200).send('OK');
});
```

### 2. Register the Webhook

Use the API to register your endpoint:

```bash
curl -X POST https://api.jasni.ai/api/v1/webhooks \
  -H "Authorization: Bearer jsk_your_api_key" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://your-server.com/webhooks/jasni",
    "events": ["email.received", "email.sent"]
  }'
```

### 3. Save the Secret

The response includes a `secret` - save it securely:

```json
{
  "success": true,
  "data": {
    "webhook": {
      "id": "webhook-id",
      "secret": "whsec_abc123..."
    }
  }
}
```

### 4. Verify Signatures

Always verify that webhooks are from Jasni:

```javascript
const crypto = require('crypto');

function verifySignature(payload, signature, secret) {
  const expected = crypto
    .createHmac('sha256', secret)
    .update(payload)
    .digest('hex');
  
  return crypto.timingSafeEqual(
    Buffer.from(signature),
    Buffer.from(expected)
  );
}

app.post('/webhooks/jasni', express.raw({ type: 'application/json' }), (req, res) => {
  const signature = req.headers['x-webhook-signature'];
  const payload = req.body.toString();
  
  if (!verifySignature(payload, signature, process.env.WEBHOOK_SECRET)) {
    return res.status(401).send('Invalid signature');
  }
  
  // Process verified webhook
  const data = JSON.parse(payload);
  // ...
});
```

## Available Events

| Event | Trigger |
|-------|---------|
| `email.received` | New email arrives in mailbox |
| `email.sent` | Email sent successfully |
| `email.bounced` | Email delivery failed |
| `email.spam` | Email marked as spam |
| `email.deleted` | Email was deleted |

<Card title="Event Reference" icon="/icons-svg/info.svg" href="/webhooks/events">
  See detailed payload schemas for each event
</Card>

## Webhook Payload

Every webhook includes all the context your agent needs to act:

```json
{
  "event": "email.received",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "id": "12345",
    "messageId": "<abc@example.com>",
    "from": "customer@example.com",
    "to": ["agent@yourdomain.com"],
    "subject": "Need help with my order",
    "account": "agent@yourdomain.com",
    "folder": "INBOX",
    "text": "Hi, I have a question about my recent order...",
    "html": "<p>Hi, I have a question about my recent order...</p>"
  }
}
```

## Headers

Each webhook request includes:

| Header | Description |
|--------|-------------|
| `Content-Type` | `application/json` |
| `X-Webhook-Signature` | HMAC-SHA256 signature |
| `X-Webhook-Timestamp` | Unix timestamp |
| `X-Webhook-Event` | Event type |
| `User-Agent` | `JasniAI-Webhooks/1.0` |

## Retry Policy

If your endpoint fails (non-2xx response or timeout), Jasni retries:

| Attempt | Delay |
|---------|-------|
| 1st | Immediate |
| 2nd | 10 seconds |
| 3rd | 60 seconds |
| 4th | 5 minutes |

After 3 failed retries, the delivery is marked as failed.

## Best Practices

<AccordionGroup>
  <Accordion title="Acknowledge fast, process async" icon="/icons-svg/refresh.svg">
    Return a `200` response immediately, then queue the event for your agent to process. Webhooks timeout after 30 seconds.
  </Accordion>
  
  <Accordion title="Design for idempotency" icon="/icons-svg/copy.svg">
    The same event might be delivered multiple times. Your agent should handle duplicates gracefully.
  </Accordion>
  
  <Accordion title="Always verify signatures" icon="/icons-svg/keys.svg">
    Verify the `X-Webhook-Signature` header to ensure events are genuinely from Jasni—not spoofed.
  </Accordion>
  
  <Accordion title="Use HTTPS" icon="/icons-svg/world.svg">
    Always use HTTPS endpoints in production to protect email content in transit.
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Events" icon="/icons-svg/info.svg" href="/webhooks/events">
    Payload schemas
  </Card>
  <Card title="Security" icon="/icons-svg/keys.svg" href="/webhooks/security">
    Verify signatures
  </Card>
  <Card title="Best Practices" icon="/icons-svg/check.svg" href="/webhooks/best-practices">
    Production tips
  </Card>
  <Card title="Create Webhook" icon="/icons-svg/plus.svg" href="/api-reference/webhooks/create">
    API endpoint
  </Card>
</CardGroup>
